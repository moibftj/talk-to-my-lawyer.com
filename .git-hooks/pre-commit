#!/bin/bash
# Pre-commit hook for Talk-To-My-Lawyer
# Runs fast checks before allowing commit

set -e

echo "ğŸ” Running pre-commit checks..."

# Run linter (fast)
echo "  â–¶ Running linter..."
if ! pnpm lint --quiet; then
  echo "âŒ Linter failed. Please fix linting errors before committing."
  echo "   Run 'pnpm lint:fix' to auto-fix many issues."
  exit 1
fi

# Run security audit (fast)
echo "  â–¶ Running security audit..."
if ! pnpm audit --audit-level=high --quiet; then
  echo "âš ï¸  High-severity security vulnerabilities found."
  echo "   Please review before committing."
  exit 1
fi

echo "âœ… Pre-commit checks passed!"
